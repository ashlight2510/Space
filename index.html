<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Space â€” í‰ìˆ˜ ë³€í™˜ê¸°</title>
    <meta name="description" content="í‰ â†” ã¡ â†” ftÂ² ë¹ ë¥¸ ë³€í™˜ (Space)" />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0f172a/ffffff&text=Space"
    />
    <link
      rel="icon"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%230b1020'/%3E%3Ctext x='50' y='62' font-size='60' text-anchor='middle' fill='white'%3ES%3C/text%3E%3C/svg%3E"
    />
    <style>
      :root {
        --bg: #0b1020;
        --card: rgba(17, 26, 51, 0.82);
        --text: #e9eeff;
        --muted: #9aa7c7;
        --line: rgba(255, 255, 255, 0.1);
        --accent: #2b5cff;
        --ok: #22c55e;
        --warn: #f59e0b;
        --radius: 18px;
        --shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
      }
      * {
        box-sizing: border-box;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Apple SD Gothic Neo, Noto Sans KR;
      }
      body {
        margin: 0;
        color: var(--text);
        background: radial-gradient(1200px 700px at 20% 0%, #1a2b5a, var(--bg)),
          radial-gradient(900px 600px at 90% 20%, #10224a, transparent);
        min-height: 100vh;
      }
      .wrap {
        max-width: 980px;
        margin: 24px auto;
        padding: 0 16px;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 14px;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 900;
        letter-spacing: 0.2px;
      }
      .brand .logo {
        width: 40px;
        height: 40px;
        border-radius: 14px;
        display: grid;
        place-items: center;
        background: linear-gradient(
          135deg,
          rgba(43, 92, 255, 0.35),
          rgba(255, 255, 255, 0.06)
        );
        border: 1px solid var(--line);
        box-shadow: var(--shadow);
        font-size: 18px;
      }
      .brand .title {
        display: flex;
        flex-direction: column;
        line-height: 1.1;
      }
      .brand .title small {
        font-weight: 600;
        color: var(--muted);
        margin-top: 4px;
      }
      .top-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      button {
        border: none;
        border-radius: 12px;
        padding: 10px 12px;
        font-weight: 800;
        cursor: pointer;
        color: white;
        background: var(--accent);
        box-shadow: 0 12px 30px rgba(43, 92, 255, 0.18);
      }
      button.ghost {
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        box-shadow: none;
      }
      .btn-link {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        text-decoration: none;
        border: none;
        border-radius: 12px;
        padding: 10px 12px;
        font-weight: 800;
        cursor: pointer;
        color: white;
        background: var(--accent);
        box-shadow: 0 12px 30px rgba(43, 92, 255, 0.18);
      }
      .btn-link.ghost {
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        box-shadow: none;
      }
      button:disabled {
        opacity: 0.45;
        cursor: not-allowed;
      }
      .grid {
        display: grid;
        grid-template-columns: 1.2fr 0.8fr;
        gap: 14px;
      }
      @media (max-width: 860px) {
        .grid {
          grid-template-columns: 1fr;
        }
      }

      .card {
        background: var(--card);
        border: 1px solid var(--line);
        border-radius: var(--radius);
        padding: 16px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(10px);
      }
      .card h2,
      .card h3 {
        margin: 0 0 12px 0;
      }
      .muted {
        color: var(--muted);
      }
      .row {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
      }
      .row.between {
        justify-content: space-between;
      }
      .pill {
        display: inline-flex;
        gap: 8px;
        align-items: center;
        padding: 8px 10px;
        border: 1px solid var(--line);
        border-radius: 999px;
        color: var(--text);
        font-size: 13px;
      }
      .pill strong {
        font-size: 13px;
      }
      .controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        margin-top: 10px;
      }
      @media (max-width: 520px) {
        .controls {
          grid-template-columns: 1fr;
        }
      }

      .field {
        border: 1px solid var(--line);
        border-radius: 16px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.03);
      }
      .field label {
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: var(--muted);
        font-weight: 800;
        font-size: 12px;
        letter-spacing: 0.2px;
        margin-bottom: 8px;
      }
      .field label .unit {
        color: var(--text);
        font-weight: 900;
      }
      .input {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      input[type="text"] {
        width: 100%;
        background: #0f1733;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text);
        padding: 12px 12px;
        border-radius: 12px;
        outline: none;
        font-size: 16px;
        font-weight: 800;
      }
      input[type="text"]::placeholder {
        color: rgba(154, 167, 199, 0.6);
        font-weight: 700;
      }
      .mini {
        padding: 9px 10px;
        border-radius: 12px;
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        font-weight: 900;
        cursor: pointer;
        box-shadow: none;
        white-space: nowrap;
      }
      .mini.ok {
        border-color: rgba(34, 197, 94, 0.45);
      }
      .mini.warn {
        border-color: rgba(245, 158, 11, 0.45);
      }
      .mini:active {
        transform: translateY(1px);
      }
      .help {
        margin-top: 10px;
        font-size: 13px;
        color: var(--muted);
        line-height: 1.5;
      }
      .quick {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .quick button {
        background: transparent;
        border: 1px solid var(--line);
        color: var(--text);
        box-shadow: none;
        padding: 8px 10px;
        border-radius: 999px;
        font-weight: 900;
      }
      .sep {
        height: 1px;
        background: var(--line);
        margin: 12px 0;
      }
      select {
        width: 100%;
        background: #0f1733;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text);
        padding: 12px 12px;
        border-radius: 12px;
        outline: none;
        font-weight: 800;
      }
      .toast {
        position: fixed;
        left: 50%;
        bottom: 18px;
        transform: translateX(-50%);
        background: rgba(17, 26, 51, 0.92);
        border: 1px solid var(--line);
        padding: 10px 12px;
        border-radius: 999px;
        color: var(--text);
        box-shadow: var(--shadow);
        display: none;
        gap: 8px;
        align-items: center;
        font-weight: 900;
        max-width: 92vw;
      }
      .toast.show {
        display: inline-flex;
      }
      .kbd {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          monospace;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 8px;
        border: 1px solid var(--line);
        background: rgba(255, 255, 255, 0.03);
        color: var(--text);
        font-weight: 800;
      }
      footer {
        margin-top: 14px;
        color: var(--muted);
        font-size: 12px;
        line-height: 1.5;
      }
      a {
        color: inherit;
      }
    </style>
  </head>

  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <div class="logo">ğŸ›°ï¸</div>
          <div class="title">
            <div>Space</div>
            <small>í‰ â†” ã¡ â†” ftÂ² ë³€í™˜ê¸°</small>
          </div>
        </div>

        <div class="top-actions">
          <a
            class="btn-link ghost"
            href="https://funnyfunny.cloud/"
            target="_blank"
            rel="noopener noreferrer"
          >
            ğŸŒ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ ë³´ê¸°
          </a>
          <button id="btnSwap" class="ghost" title="ê¸°ì¤€ ì…ë ¥ì¹¸ ë°”ê¾¸ê¸°">
            â‡„ ìŠ¤ì™‘
          </button>
          <button id="btnShare" class="ghost" title="í˜„ì¬ ê°’ìœ¼ë¡œ ë§í¬ ë³µì‚¬">
            ğŸ”— ê³µìœ 
          </button>
          <button id="btnReset" title="ì´ˆê¸°í™”">ì´ˆê¸°í™”</button>
        </div>
      </header>

      <div class="grid">
        <section class="card">
          <div class="row between">
            <h2 style="margin: 0">ë³€í™˜</h2>
            <div class="row">
              <span class="pill">âš¡ ì‹¤ì‹œê°„</span>
              <span class="pill"
                >âŒ› 10ë¶„? <strong>ì•„ë‹ˆê³ </strong> ë³€í™˜ê¸° ğŸ˜„</span
              >
            </div>
          </div>

          <div class="controls">
            <div class="field" data-unit="pyeong">
              <label>
                <span>ì…ë ¥</span>
                <span class="unit">í‰ (pyeong)</span>
              </label>
              <div class="input">
                <input
                  id="inPyeong"
                  type="text"
                  inputmode="decimal"
                  placeholder="ì˜ˆ: 24"
                />
                <button class="mini ok" id="copyPyeong" title="ë³µì‚¬">
                  ë³µì‚¬
                </button>
              </div>
              <div class="help">ë¶€ë™ì‚°ì—ì„œ í”íˆ ì“°ëŠ” í‰ ë‹¨ìœ„.</div>
            </div>

            <div class="field" data-unit="sqm">
              <label>
                <span>ì…ë ¥</span>
                <span class="unit">ã¡ (mÂ²)</span>
              </label>
              <div class="input">
                <input
                  id="inSqm"
                  type="text"
                  inputmode="decimal"
                  placeholder="ì˜ˆ: 84"
                />
                <button class="mini ok" id="copySqm" title="ë³µì‚¬">ë³µì‚¬</button>
              </div>
              <div class="help">êµ­ì œ í‘œì¤€ ë©´ì  ë‹¨ìœ„(ì œê³±ë¯¸í„°).</div>
            </div>

            <div class="field" data-unit="sqft">
              <label>
                <span>ì…ë ¥</span>
                <span class="unit">ftÂ² (sq ft)</span>
              </label>
              <div class="input">
                <input
                  id="inSqft"
                  type="text"
                  inputmode="decimal"
                  placeholder="ì˜ˆ: 904"
                />
                <button class="mini ok" id="copySqft" title="ë³µì‚¬">ë³µì‚¬</button>
              </div>
              <div class="help">í•´ì™¸ì—ì„œ í”í•œ ì œê³±í”¼íŠ¸.</div>
            </div>

            <div class="field">
              <label>
                <span>í‘œì‹œ ì˜µì…˜</span>
                <span class="unit">ë°˜ì˜¬ë¦¼</span>
              </label>
              <div class="input">
                <select id="rounding">
                  <option value="0">ì†Œìˆ˜ 0ìë¦¬</option>
                  <option value="1">ì†Œìˆ˜ 1ìë¦¬</option>
                  <option value="2" selected>ì†Œìˆ˜ 2ìë¦¬</option>
                  <option value="3">ì†Œìˆ˜ 3ìë¦¬</option>
                  <option value="4">ì†Œìˆ˜ 4ìë¦¬</option>
                </select>
              </div>
              <div class="help">
                ì…ë ¥ì€ ììœ ë¡­ê²Œ(ì½¤ë§ˆ í¬í•¨ ê°€ëŠ¥). ì¶œë ¥ì€ ì„ íƒí•œ ìë¦¬ìˆ˜ë¡œ ì •ë¦¬ë¼.
              </div>
            </div>
          </div>

          <div class="sep"></div>

          <div class="row between">
            <div class="muted">
              ë¹ ë¥¸ ì…ë ¥: <span class="kbd">Alt</span> +
              <span class="kbd">1/2/3</span> (í‰/ã¡/ftÂ² í¬ì»¤ìŠ¤)
            </div>
            <div class="row">
              <button class="ghost" id="btnClean" title="í˜„ì¬ ì…ë ¥ì¹¸ë§Œ ë¹„ìš°ê¸°">
                ğŸ§¹ í˜„ì¬ì¹¸ ë¹„ìš°ê¸°
              </button>
            </div>
          </div>

          <div class="quick" aria-label="ë¹ ë¥¸ í‰ ì…ë ¥">
            <button data-q="10">10í‰</button>
            <button data-q="15">15í‰</button>
            <button data-q="20">20í‰</button>
            <button data-q="24">24í‰</button>
            <button data-q="30">30í‰</button>
            <button data-q="34">34í‰</button>
            <button data-q="40">40í‰</button>
            <button data-q="50">50í‰</button>
          </div>

          <div id="status" class="help" style="margin-top: 12px"></div>
        </section>

        <aside class="card">
          <h3>ìš”ì•½</h3>
          <div class="row" style="margin-top: 8px">
            <span class="pill"
              >ğŸ“Œ ê¸°ì¤€: <strong id="primaryLabel">í‰</strong></span
            >
            <span class="pill"
              >ğŸ§¾ í¬ë§·: <strong id="formatLabel">ì†Œìˆ˜ 2ìë¦¬</strong></span
            >
          </div>

          <div class="sep"></div>

          <h3 style="margin-bottom: 10px">í•œ ì¤„ ë³µì‚¬</h3>
          <div class="field">
            <label>
              <span>ê²°ê³¼</span>
              <span class="unit">í…ìŠ¤íŠ¸</span>
            </label>
            <div class="input">
              <input id="oneLine" type="text" readonly />
              <button class="mini ok" id="copyOneLine">ë³µì‚¬</button>
            </div>
            <div class="help">ë©”ì‹ ì €/ë©”ëª¨ì— ë¶™ì—¬ë„£ê¸° ì¢‹ê²Œ ì •ë¦¬í•´ì¤˜.</div>
          </div>

          <div class="sep"></div>

          <h3 style="margin-bottom: 10px">ì°¸ê³ </h3>
          <div class="help">
            â€¢ 1í‰ = 3.3057851239669ã¡ :contentReference[oaicite:2]{index=2}<br />
            â€¢ 1ã¡ = 10.76391ftÂ² :contentReference[oaicite:3]{index=3}
          </div>

          <footer>
            â€œSpaceâ€ëŠ” ë‹¨ì¼ íŒŒì¼ì´ë¼ ì„œë²„ ì—†ì´ë„ ë™ì‘í•´. íŒŒì¼ë¡œ ì €ì¥í•´ì„œ ë°”ë¡œ
            ì—´ë©´ ë.
          </footer>
        </aside>
      </div>
    </div>

    <div id="toast" class="toast" role="status" aria-live="polite">
      âœ… ë³µì‚¬í–ˆì–´
    </div>

    <script>
      // === Conversion constants (cited) ===
      // 1 pyeong = 3.3057851239669 mÂ²
      const PYEONG_TO_SQM = 3.3057851239669;
      // 1 mÂ² = 10.76391 ftÂ²
      const SQM_TO_SQFT = 10.76391;

      const elP = document.getElementById("inPyeong");
      const elM = document.getElementById("inSqm");
      const elF = document.getElementById("inSqft");

      const roundingEl = document.getElementById("rounding");
      const statusEl = document.getElementById("status");
      const oneLineEl = document.getElementById("oneLine");
      const toastEl = document.getElementById("toast");

      const primaryLabelEl = document.getElementById("primaryLabel");
      const formatLabelEl = document.getElementById("formatLabel");

      const btnSwap = document.getElementById("btnSwap");
      const btnShare = document.getElementById("btnShare");
      const btnReset = document.getElementById("btnReset");
      const btnClean = document.getElementById("btnClean");

      let updating = false;
      let primary = "pyeong"; // pyeong | sqm | sqft

      function showToast(msg, kind = "ok") {
        toastEl.textContent = msg;
        toastEl.style.borderColor =
          kind === "warn" ? "rgba(245,158,11,.45)" : "rgba(34,197,94,.45)";
        toastEl.classList.add("show");
        clearTimeout(showToast._t);
        showToast._t = setTimeout(() => toastEl.classList.remove("show"), 1400);
      }

      function cleanNumberInput(str) {
        if (str == null) return "";
        // allow digits, dot, minus; remove commas/spaces
        return String(str).replace(/,/g, "").trim();
      }

      function parseNum(str) {
        const s = cleanNumberInput(str);
        if (s === "") return null;
        const n = Number(s);
        return Number.isFinite(n) ? n : null;
      }

      function fmt(n) {
        const dp = Number(roundingEl.value);
        // Keep trailing zeros for consistent copy/display
        const fixed = n.toFixed(dp);
        // Add thousands separators without breaking decimals
        const [a, b] = fixed.split(".");
        const withComma = a.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        return b != null ? `${withComma}.${b}` : withComma;
      }

      function setPrimaryLabel() {
        const map = { pyeong: "í‰", sqm: "ã¡", sqft: "ftÂ²" };
        primaryLabelEl.textContent = map[primary] || "í‰";
        formatLabelEl.textContent = `ì†Œìˆ˜ ${roundingEl.value}ìë¦¬`;
      }

      function buildOneLine(p, m, f) {
        if (p == null || m == null || f == null) {
          oneLineEl.value = "";
          return;
        }
        oneLineEl.value = `${fmt(p)}í‰ = ${fmt(m)}ã¡ = ${fmt(f)}ftÂ²`;
      }

      function updateStatusFromPrimary(p, m, f) {
        const dp = Number(roundingEl.value);
        const map = {
          pyeong: `í˜„ì¬ ê¸°ì¤€: í‰ ì…ë ¥ â†’ ã¡/ftÂ² ìë™ ê³„ì‚° (ì†Œìˆ˜ ${dp}ìë¦¬)`,
          sqm: `í˜„ì¬ ê¸°ì¤€: ã¡ ì…ë ¥ â†’ í‰/ftÂ² ìë™ ê³„ì‚° (ì†Œìˆ˜ ${dp}ìë¦¬)`,
          sqft: `í˜„ì¬ ê¸°ì¤€: ftÂ² ì…ë ¥ â†’ ã¡/í‰ ìë™ ê³„ì‚° (ì†Œìˆ˜ ${dp}ìë¦¬)`,
        };
        statusEl.textContent = map[primary] || "";
        buildOneLine(p, m, f);
        setPrimaryLabel();
      }

      function computeFrom(unit) {
        if (updating) return;
        updating = true;

        const dp = Number(roundingEl.value);
        let p = null,
          m = null,
          f = null;

        if (unit === "pyeong") {
          p = parseNum(elP.value);
          if (p == null) {
            elM.value = "";
            elF.value = "";
            updateStatusFromPrimary(null, null, null);
            updating = false;
            return;
          }
          m = p * PYEONG_TO_SQM;
          f = m * SQM_TO_SQFT;
          elM.value = fmt(m);
          elF.value = fmt(f);
          primary = "pyeong";
        }

        if (unit === "sqm") {
          m = parseNum(elM.value);
          if (m == null) {
            elP.value = "";
            elF.value = "";
            updateStatusFromPrimary(null, null, null);
            updating = false;
            return;
          }
          p = m / PYEONG_TO_SQM;
          f = m * SQM_TO_SQFT;
          elP.value = fmt(p);
          elF.value = fmt(f);
          primary = "sqm";
        }

        if (unit === "sqft") {
          f = parseNum(elF.value);
          if (f == null) {
            elP.value = "";
            elM.value = "";
            updateStatusFromPrimary(null, null, null);
            updating = false;
            return;
          }
          m = f / SQM_TO_SQFT;
          p = m / PYEONG_TO_SQM;
          elM.value = fmt(m);
          elP.value = fmt(p);
          primary = "sqft";
        }

        updateStatusFromPrimary(p, m, f);
        updating = false;
      }

      function focusPrimary() {
        if (primary === "pyeong") elP.focus();
        else if (primary === "sqm") elM.focus();
        else elF.focus();
      }

      function currentInputEl() {
        const active = document.activeElement;
        if (active === elP) return elP;
        if (active === elM) return elM;
        if (active === elF) return elF;
        // fallback to primary
        return primary === "sqm" ? elM : primary === "sqft" ? elF : elP;
      }

      function setValueAndCompute(unit, value) {
        if (unit === "pyeong") elP.value = String(value);
        if (unit === "sqm") elM.value = String(value);
        if (unit === "sqft") elF.value = String(value);
        computeFrom(unit);
      }

      // Input listeners
      elP.addEventListener("input", () => computeFrom("pyeong"));
      elM.addEventListener("input", () => computeFrom("sqm"));
      elF.addEventListener("input", () => computeFrom("sqft"));
      roundingEl.addEventListener("change", () => computeFrom(primary));

      // Copy helpers
      async function copyText(txt) {
        try {
          await navigator.clipboard.writeText(txt);
          showToast("âœ… ë³µì‚¬í–ˆì–´");
        } catch (e) {
          // fallback
          const ta = document.createElement("textarea");
          ta.value = txt;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          ta.remove();
          showToast("âœ… ë³µì‚¬í–ˆì–´");
        }
      }

      document.getElementById("copyPyeong").onclick = () => {
        const n = parseNum(elP.value);
        if (n == null) return showToast("âš ï¸ ê°’ì´ ë¹„ì—ˆì–´", "warn");
        copyText(elP.value);
      };
      document.getElementById("copySqm").onclick = () => {
        const n = parseNum(elM.value);
        if (n == null) return showToast("âš ï¸ ê°’ì´ ë¹„ì—ˆì–´", "warn");
        copyText(elM.value);
      };
      document.getElementById("copySqft").onclick = () => {
        const n = parseNum(elF.value);
        if (n == null) return showToast("âš ï¸ ê°’ì´ ë¹„ì—ˆì–´", "warn");
        copyText(elF.value);
      };
      document.getElementById("copyOneLine").onclick = () => {
        if (!oneLineEl.value) return showToast("âš ï¸ ê°’ì´ ë¹„ì—ˆì–´", "warn");
        copyText(oneLineEl.value);
      };

      // Quick buttons: set pyeong and compute
      document.querySelectorAll(".quick button[data-q]").forEach((b) => {
        b.addEventListener("click", () =>
          setValueAndCompute("pyeong", b.dataset.q)
        );
      });

      // Swap: rotate primary (pyeong -> sqm -> sqft -> pyeong)
      btnSwap.onclick = () => {
        primary =
          primary === "pyeong" ? "sqm" : primary === "sqm" ? "sqft" : "pyeong";
        computeFrom(primary);
        focusPrimary();
        showToast("â†”ï¸ ê¸°ì¤€ì„ ë°”ê¿¨ì–´");
      };

      // Clean current field
      btnClean.onclick = () => {
        const el = currentInputEl();
        el.value = "";
        if (el === elP) computeFrom("pyeong");
        if (el === elM) computeFrom("sqm");
        if (el === elF) computeFrom("sqft");
        el.focus();
        showToast("ğŸ§¹ ë¹„ì› ì–´");
      };

      // Reset all
      btnReset.onclick = () => {
        elP.value = "";
        elM.value = "";
        elF.value = "";
        oneLineEl.value = "";
        primary = "pyeong";
        setPrimaryLabel();
        statusEl.textContent = "ê°’ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ë³€í™˜ë¼.";
        showToast("ğŸ”„ ì´ˆê¸°í™” ì™„ë£Œ");
        elP.focus();
        // clear URL params
        history.replaceState(null, "", location.pathname);
      };

      // Share: store current primary value in URL (?u=pyeong&v=24&d=2)
      btnShare.onclick = async () => {
        const unit = primary;
        const val =
          unit === "pyeong"
            ? parseNum(elP.value)
            : unit === "sqm"
            ? parseNum(elM.value)
            : parseNum(elF.value);
        if (val == null) return showToast("âš ï¸ ê³µìœ í•  ê°’ì´ ì—†ì–´", "warn");

        const url = new URL(location.href);
        url.searchParams.set("u", unit);
        url.searchParams.set("v", String(val));
        url.searchParams.set("d", roundingEl.value);

        await copyText(url.toString());
        showToast("ğŸ”— ë§í¬ ë³µì‚¬ ì™„ë£Œ");
      };

      // Keyboard shortcuts
      window.addEventListener("keydown", (e) => {
        if (!e.altKey) return;
        if (e.key === "1") {
          elP.focus();
          primary = "pyeong";
          setPrimaryLabel();
        }
        if (e.key === "2") {
          elM.focus();
          primary = "sqm";
          setPrimaryLabel();
        }
        if (e.key === "3") {
          elF.focus();
          primary = "sqft";
          setPrimaryLabel();
        }
      });

      // Load from URL params
      (function initFromURL() {
        const url = new URL(location.href);
        const u = url.searchParams.get("u");
        const v = url.searchParams.get("v");
        const d = url.searchParams.get("d");
        if (d != null && ["0", "1", "2", "3", "4"].includes(d))
          roundingEl.value = d;

        if (!u || v == null) {
          setPrimaryLabel();
          statusEl.textContent = "ê°’ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ë³€í™˜ë¼.";
          return;
        }
        if (u === "pyeong" || u === "sqm" || u === "sqft") {
          primary = u;
          setValueAndCompute(u, v);
          focusPrimary();
          showToast("ğŸ“¥ ë§í¬ ê°’ ë¶ˆëŸ¬ì™”ì–´");
        } else {
          setPrimaryLabel();
          statusEl.textContent = "ê°’ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ë³€í™˜ë¼.";
        }
      })();
    </script>
  </body>
</html>
